<div id="mymodal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form action="">
        </form>

        <div class="pagination"></div>

      </div>
      <div class="modal-footer">
        <button id="" type="button" class="btn btn-secondary btn-sm fst_btn" data-dismiss="modal">Close</button>
        <button id="" type="button" class="btn btn-primary btn-sm sec_btn">Save</button>
      </div>
    </div>
  </div>
</div>

<script>
  function init(container) {
    let modalname = '#mymodal';
    let _ROWS = 15

    // осы үшеуін де алып тастау керек сияқты
    $(container + ' .modal-title').text("Трубалардың тізімі");
    $(container + ' .fst_btn').text("Жабу");
    $(container + ' .sec_btn').text("Жаңасын енгізу");

    $.post('/pipe-view', function (data) {
      l = data.length;
      count = Math.round(l / _ROWS); 

      table = new Table(
        { data: data, 
          head: ["Атауы", "Диаметрі", "Ұзындығы"],
          tdstyle: ['', 'text-right', 'text-right'],
          mode: 'edit',
          rows: _ROWS
        });
      
      pagination = new Pagination({count: count, current: 1});
      $(container + ' .pagination:first').append(pagination.create());
      $(container + ' form:first').append(table.create());
      table.render();
      pagination.render();
    });

    $(container + ' .pagination:first').on('click', 'a', function() {
      event.preventDefault();

      let page;
      if ($(this).attr("aria-label") == 'Next') {
        page = count;

      } else if ($(this).attr("aria-label") == 'Previous') {
        page = 1;

      } else {
        page = +this.innerHTML;
        
      }
      table.render(page);
      pagination.page(page);
      pagination.render();
      
    })

    $(container + ' .sec_btn').on('click', function() {
      event.preventDefault();
      console.log("Жаңа мәлімет енгізу үшін жаңа бетті ашамыз. ");

      showmodal(2);
      console.log("Ашқан бетіміз жабылды.")

    });

    $(container + ' ' + modalname).modal({ 'show': true, "backdrop": false });
  }

</script>