<div class="form-group" id="form-step-0" role="form">
    <div class="row">
        <label class="col-1 col-form-label text-right font-weight-bold" for="tender_id">Заявка</label>
        <div class="col-9">
            <select class="form-control form-control-sm selectpicker" data-live-search="true" data-style="btn-secondary" id="tender_id" name="tender_id" data-validate required>
                <option value="">...</option>
            </select>
            <span class="help-block with-errors"></span>
        </div>
    </div>

    <div class="offset-1 custom-file_">
        <input type="file" class="" id="customFile">
    </div>
    <div class="row my-2">

        <div class="col-9 offset-1">

            <div class="card mr-1 mt-1">
                <button type="button" class="close text-right" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <div class="card-container">
                    <img src="./img/jpeg128.png" class="" alt="...">       <!-- filetype icon -->
                    <div class="progress d-none">                           <!-- progress-bar -->
                        <div class="progress-bar" role="progressbar" style="width: 88%" aria-valuenow="88" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                <div class="card-body my-card-body">
                    <p class="card-text text-center text-truncate">filename.txt</p> <!-- filename -->
                </div>
            </div>

        </div>
    </div>
</div>

<script>
!function() {

    $('#customFile').on('change', function(){
        console.log(this.value)
        const filename = this.files[0].name;
        let filetype = filename.split('.');
        filetype = (filetype.length > 1) ? filetype.pop() : 'readme';
        filetype = `./img/${filetype}128.png`;
        const card = '<div class="card mr-1 mt-1"><button type="button" class="close text-right" aria-label="Close">' +
        `<span aria-hidden="true">&times;</span></button><div class="card-container"><img src="${filetype}" class="" alt="...">` +
        '<div class="progress d-none"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>' +
        `</div></div><div class="card-body my-card-body"><p class="card-text text-center text-truncate">${filename}</p></div></div>`;

        $('.col-9.offset-1').append(card);
    })

    $.ajax({
        type: "POST",
        url: "/tenders-view",
        success: function(res){

            data = res.data;
            var option = "<option value=''>...</option>";

            for (i=0; i<data.length; i++) {
                option = option + "<option value='" + data[i].tender_id + "'>" + data[i].tender_name + "</option>";
            }

            $('#tender_id').html(option);

            $('#tender_id').selectpicker();
        }
    });

}()
</script>
